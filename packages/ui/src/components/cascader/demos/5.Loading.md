---
title:
  en-US: Loading
  zh-Hant: 加载
---

# en-US

This example shows loading on open, loading on focus, and loading on search.

# zh-Hant

该示例展示了打开时加载、聚焦时加载以及搜索时加载。

```tsx
import { useState } from 'react';

import { DCascader } from '@react-devui/ui';
import { useImmer, useAsync } from '@react-devui/ui/hooks';

export default function Demo() {
  const asyncCapture = useAsync();

  const [visible1, setVisible1] = useState(false);
  const [loading1, setLoading1] = useState(false);
  const [options1, setOptions1] = useState([]);

  const [options2, setOptions2] = useState(
    Array(3)
      .fill(0)
      .map((item, index1) => ({
        value: index1,
        label: `Option ${index1}`,
        children: [],
      }))
  );

  const [loading3, setLoading3] = useState(false);
  const [options3, setOptions3] = useState([]);
  const [select3, setSelect3] = useState(null);

  return (
    <>
      <DCascader
        dOptions={options1}
        dPlaceholder="Open"
        dClearable
        dVisible={[visible1, setVisible1]}
        dLoading={loading1}
        onVisibleChange={(visible) => {
          if (visible && options1.length === 0) {
            setLoading1(true);
            asyncCapture.setTimeout(() => {
              setLoading1(false);
              setOptions1(
                Array(3)
                  .fill(0)
                  .map((item, index1) => ({
                    label: `Option ${index1}`,
                    value: `${index1}`,
                    children: Array(5)
                      .fill(0)
                      .map((item, index2) => ({
                        label: `Option ${index1}-${index2}`,
                        value: `${index1}-${index2}`,
                        disabled: index2 === 3,
                        children: Array(20)
                          .fill(0)
                          .map((item, index3) => ({
                            label: `Option ${index1}-${index2}-${index3}`,
                            value: `${index1}-${index2}-${index3}`,
                          })),
                      })),
                  }))
              );
            }, 1000);
          }
        }}
      ></DCascader>
      <DCascader
        dOptions={options2}
        dPlaceholder="Focus"
        dClearable
        onFocusChange={(value) => {
          const findIndex = options2.findIndex((item) => item.value === value);
          if (findIndex !== -1) {
            options2[findIndex].loading = true;
            setOptions2([].concat(options2));
            asyncCapture.setTimeout(() => {
              options2[findIndex].loading = false;
              options2[findIndex].children = Array(5)
                .fill(0)
                .map((item, index) => ({
                  label: `Option ${value}-${index}`,
                  value: `${value}-${index}`,
                  disabled: index === 3,
                }));
              setOptions2([].concat(options2));
            }, 1000);
          }
        }}
      ></DCascader>
      <DCascader
        dOptions={options3}
        dModel={[select3, setSelect3]}
        dPlaceholder="Search"
        dClearable
        dSearchable
        dLoading={loading3}
        onSearch={(value) => {
          const [asyncGroup] = asyncCapture.createGroup('Search');
          setSelect3(null);
          if (value.length === 0) {
            setLoading3(false);
            setOptions3([]);
          } else {
            setLoading3(true);
            setOptions3([]);
            asyncGroup.setTimeout(() => {
              setLoading3(false);
              setOptions3(
                Array(3)
                  .fill(0)
                  .map((item, index1) => ({
                    label: `${value} ${index1}`,
                    value: `${index1}`,
                    children: Array(5)
                      .fill(0)
                      .map((item, index2) => ({
                        label: `${value} ${index1}-${index2}`,
                        value: `${index1}-${index2}`,
                        disabled: index2 === 3,
                        children: Array(5)
                          .fill(0)
                          .map((item, index3) => ({
                            label: `${value} ${index1}-${index2}-${index3}`,
                            value: `${index1}-${index2}-${index3}`,
                          })),
                      })),
                  }))
              );
            }, 1000);
          }
        }}
      ></DCascader>
    </>
  );
}
```
